<html>
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
	<title>Map</title>
	<link rel="stylesheet" href="./css/style.css">
	<link rel="icon" href="./img/favicon.png">
	<link rel="shortcut icon" href="./img/favicon.png">
	<script type="text/javascript" src="./js/main.js"></script>
	<script type="text/javascript" src="https://webapi.amap.com/maps?v=1.4.15&key=3ade8ca77711cbf193109f6521385d56"></script>
	<script src="http://cache.amap.com/lbs/static/es5.min.js"></script>
	<script type="text/javascript" src="https://webapi.amap.com/maps?v=1.4.15&key=3ade8ca77711cbf193109f6521385d56&plugin=AMap.Autocomplete,AMap.PlaceSearch"></script>
	<script type="text/javascript" src="https://cache.amap.com/lbs/static/addToolbar.js"></script>
</head>
<body>
<header>
	<h1>地图查询</h1>
	<p>支持经纬度及地点查询</p>
	<p>可以获取经纬度</p>
</header>
<div class="main">
	<div class="box">
		<div class="queryPos">
			<p>请输入经纬度：</p>
			<input type="text" id="position" value="113.270635,35.189226">
			<button class="btn" type="button" onclick="getPositionMap()">提交</button>
		</div>
		<div class="queryCity">
			<p>请输入城市：</p>
			<input type="text" id="tipinput" value="河南理工大学" autocomplete="off">
			<!-- <button class="btn" type="button" onclick="getCityMap()">提交</button> -->
		</div>
		<div class="getInglat">
			<p>当前经纬度：</p>
			<input type="text" id="lnglat">
			<button class="btn" type="button" id="copy" onclick="getCopy()">复制</button>
		</div>
	</div>
	<div id="container"></div>
	<script>
		var map = getPositionMap();
	    AMap.plugin('AMap.ToolBar',function(){//异步加载插件
	        var toolbar = new AMap.ToolBar();
	        map.addControl(toolbar);
	    });
	    AMap.plugin(['AMap.Autocomplete','AMap.PlaceSearch'],function(){
		    var autoOptions = {
		        city: "", //城市，默认全国
		        input: "tipinput"//使用联想输入的input的id（也就是上边那个唯一的id）
		    };
		    autocomplete= new AMap.Autocomplete(autoOptions);
		    var placeSearch = new AMap.PlaceSearch({
		        city:'',
		        map:map
		    })
		    AMap.event.addListener(autocomplete, "select", function(e){
		        //TODO 针对选中的poi实现自己的功能
		        placeSearch.setCity(e.poi.adcode);
		        placeSearch.search(e.poi.name)
		    });
		});
	</script>
</div>
<footer>
	<p>Create by <a href="https://github.com/Dicer-Zz">Dicer</a>
		&nbsp&nbsp&nbsp&nbsp 
		Power by 高德地图</p>
</footer>
</body>
</html>